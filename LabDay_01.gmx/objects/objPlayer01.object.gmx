<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>PC_idle_01</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>-3</depth>
  <persistent>0</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>playerSpeed=3;
idleSpeed=0.12;
runSpeed=0.35;
image_speed=idleSpeed;
playerAttacking=false;
swingSpeed=1;

// add shadow
playerShadow=instance_create(x,y+8,objPcShadow);

// add sword
playerSword=instance_create(x,y,objPlayerBlade);
playerWeaponPosition=0;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="2">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>// shadow follow
playerShadow.x=x;
playerShadow.y=y+8;

// sword follow
playerSword.x=x;
playerSword.y=y;

// sword angle
//if(image_xscale&gt;0&amp;&amp;!playerAttacking){
//    playerSword.image_angle=-45;
//}else if(!playerAttacking){
//    playerSword.image_angle=45;
//}
playerSword.image_angle=point_direction(objPlayer01.x,objPlayer01.y,mouse_x,mouse_y);

if(playerWeaponPosition&gt;0){
    if(image_xscale&gt;0){
        playerSword.image_angle+=180;      
    }
    playerSword.depth=-2;
}else{
    if(image_xscale&lt;0){
        playerSword.image_angle+=180;
    }
    playerSword.y=y+4;
    playerSword.depth=-4;
}


// pushback from wall
if(place_meeting(x+1,y,objWall)){
    x--;
}
if(place_meeting(x-1,y,objWall)){
    x++;
}
if(place_meeting(x,y+1,objWall)){
    y--;
}
if(place_meeting(x,y-1,objWall)){
    y++;
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>currentX=x;
currentY=y;


// player movement
if(keyboard_check(ord('A'))){
    if(!place_meeting(x-playerSpeed,y,objWallTile)){
        x-=playerSpeed;
    }else if(!place_meeting(x-(playerSpeed/2),y,objWallTile)){
        x-=playerSpeed/2;
    }    
}
if(keyboard_check(ord('D'))){
    if(!place_meeting(x+playerSpeed,y,objWallTile)){
        x+=playerSpeed;
    }else if(!place_meeting(x+(playerSpeed/2),y,objWallTile)){
        x+=playerSpeed/2;
    }
}
if(keyboard_check(ord('W'))){
    if(!place_meeting(x,y-playerSpeed,objWallTile)){
        y-=playerSpeed;
    }else if(!place_meeting(x,y-(playerSpeed/2),objWallTile)){
        y-=playerSpeed/2;
    }
}
if(keyboard_check(ord('S'))){
    if(!place_meeting(x,y+playerSpeed,objWallTile)){
        y+=playerSpeed;
    }else if(!place_meeting(x,y+(playerSpeed/2),objWallTile)){
        y+=playerSpeed/2;
    }
}

// player sprite orientation
if(keyboard_check_pressed(ord('A'))){
    //if(image_xscale==1){image_xscale=-1; playerShadow.image_xscale=-1;}
}
if(keyboard_check_pressed(ord('D'))){
    //if(image_xscale==-1){image_xscale=1; playerShadow.image_xscale=1;}
}
if(keyboard_check(ord('A'))||keyboard_check(ord('D'))||keyboard_check(ord('W'))||keyboard_check(ord('S'))){
    sprite_index=PC_run_01;
    image_speed=runSpeed;
}
if(keyboard_check_released(ord('A'))||keyboard_check_released(ord('D'))||keyboard_check_released(ord('W'))||keyboard_check_released(ord('S'))){
    sprite_index=PC_idle_01;
    image_speed=idleSpeed;
}
if((keyboard_check(ord('A'))&amp;&amp;image_xscale&gt;0)||(keyboard_check(ord('D'))&amp;&amp;image_xscale&lt;0)){
    image_speed=-runSpeed;
}

if(mouse_x&gt;x&amp;&amp;image_xscale&lt;0){
    image_xscale=1;
    playerShadow.image_xscale=1;
}else if(mouse_x&lt;x&amp;&amp;image_xscale&gt;0){
    image_xscale=-1;
    playerShadow.image_xscale=-1;
}


if(mouse_check_button_pressed(mb_left)){
    if(playerWeaponPosition&gt;0){playerWeaponPosition=0;}else{playerWeaponPosition=1;}    

    var pDir=point_direction(objPlayer01.x,objPlayer01.y,mouse_x,mouse_y);
    
    with(instance_create(x+lengthdir_x(20,pDir),y+lengthdir_y(20,pDir),eLargeSwipe)){
        alarm[0]=room_speed/10;
        image_angle=pDir-90;
        image_speed=0.5;
    }
    
    //with(objFloor){
        //if(collision_circle(x,y,32,objPlayer01,false,true)){
          //  sprite_index=floorSprite02;
        //}
    //}
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
